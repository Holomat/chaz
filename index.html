<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MEC | Editorial Studio</title>
    <link href="https://fonts.googleapis.com/css2?family=Sora:wght@300;400;700;800&family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-global: #FFFFFF;
            --card-bg: #F6F5F4;
            --input-bg: #FFFFFF;
            --input-border: #E5E3E1;
            --text-main: #1C1C1E;
            --text-mute: #86868B;
            --accent-primary: #0097b5;   
            --accent-secondary: #dda906; 
            --accent-success: #27AE60;
            --accent-tips: #f39c12;
            --radius-main: 12px;
            --radius-ui: 12px;
            --gap-ui: 7px;
            --transition-smooth: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            --hover-lift: translateY(-2px);
            --hover-shadow: 0 6px 12px rgba(0,0,0,0.05);
        }

        * { margin: 0; padding: 0; box-sizing: border-box; -webkit-font-smoothing: antialiased; }
        
        body { 
            font-family: 'Inter', sans-serif; 
            background: var(--bg-global); 
            height: 100vh; 
            display: flex; 
            justify-content: space-between; 
            align-items: center; 
            color: var(--text-main); 
            overflow: hidden; 
        }

        /* --- UI ELEMENTS --- */
        .side-column { width: 33.33vw; height: 100%; display: flex; flex-direction: column; justify-content: center; align-items: center; z-index: 10; }
        .sidebar-base { width: 340px; background: var(--card-bg); border-radius: var(--radius-main); border: 1px solid #EBEBEB; display: flex; flex-direction: column; box-shadow: 0 4px 20px rgba(0,0,0,0.03); }
        .sidebar-left { padding: 24px 8px; gap: var(--gap-ui); max-height: 95vh; overflow-y: auto; scrollbar-width: none; }
        
        header { margin-bottom: 8px; padding: 0 8px; }
        .brand-logo { width: 100%; max-width: 140px; height: auto; }

        /* --- ANIMACIÃ“N MEMORABLE --- */
        .ui-card, .ui-select, .file-label, .color-card {
            height: 44px; padding: 0 14px; border: 1px solid var(--input-border);
            border-radius: var(--radius-ui); background: var(--input-bg);
            display: flex; align-items: center; transition: var(--transition-smooth);
            width: 100%; font-family: 'Inter', sans-serif; font-size: 16px; color: var(--text-main); outline: none;
            position: relative;
        }

        /* Hover states */
        .ui-card:hover, .ui-select:hover, .file-label:hover {
            transform: var(--hover-lift);
            box-shadow: var(--hover-shadow);
            border-color: var(--accent-primary);
        }

        .ui-card:focus {
            border-color: var(--accent-primary);
            box-shadow: 0 0 0 3px rgba(0, 151, 181, 0.1);
            transform: translateY(-1px);
        }

        .ui-card, .ui-select, .file-label { cursor: pointer; }
        .label-style { font-size: 10px; font-weight: 700; color: var(--accent-primary); opacity: 0.8; text-transform: uppercase; padding-left: 8px; margin-bottom: 2px; margin-top: 4px; letter-spacing: 0.05em; }

        .color-card { padding: 0 14px; justify-content: space-between; cursor: default !important; }
        .color-row { width: 100%; display: flex; justify-content: space-between; align-items: center; }
        
        .color-dot { 
            width: 24px; height: 24px; border-radius: 50%; cursor: pointer; 
            border: 2px solid transparent; transition: var(--transition-smooth); 
        }
        .color-dot:hover {
            transform: scale(1.2);
        }
        .color-dot.active { 
            transform: scale(1.1); 
            box-shadow: 0 0 0 2px #fff, 0 0 0 4px currentColor; 
        }

        .scale-slider { -webkit-appearance: none; width: 100%; height: 4px; background: #D2D2D7; border-radius: 2px; margin: 12px 8px; transition: var(--transition-smooth); }
        .scale-slider:hover { background: #b4b4b9; }
        .scale-slider::-webkit-slider-thumb { -webkit-appearance: none; width: 16px; height: 16px; background: #FFFFFF; border: 1px solid #D2D2D7; border-radius: 50%; cursor: pointer; transition: 0.2s;}
        .scale-slider::-webkit-slider-thumb:hover { transform: scale(1.2); box-shadow: 0 2px 8px rgba(0,0,0,0.1); }

        .download-btn { background: var(--accent-primary); color: #fff; border: none; height: 48px; border-radius: var(--radius-ui); font-weight: 600; cursor: pointer; margin-top: 4px; transition: var(--transition-smooth); }
        .download-btn:hover { filter: brightness(1.1); transform: translateY(-1px); box-shadow: 0 4px 12px rgba(0, 151, 181, 0.2); }
        .download-btn.ready { background: var(--accent-success) !important; transform: scale(1.02); box-shadow: 0 4px 15px rgba(39, 174, 96, 0.3); }

        /* --- CANVAS --- */
        .poster { width: 540px; height: 675px; background: #FFFFFF; position: relative; overflow: hidden; border-radius: 4px; border: 1px solid #F0F0F0; box-shadow: 0 30px 60px rgba(0,0,0,0.06); }
        #bgWrapper { position: absolute; top: 0; left: 0; width: 100%; height: 100%; cursor: move; }
        #bgPreview { position: absolute; top: 0; left: 0; width: 100%; height: 100%; object-fit: cover; transform-origin: center center; pointer-events: none; display: none; }
        #logoContainer { position: absolute; left: 36px; bottom: 32px; width: 42px; z-index: 50; pointer-events: none; }
        
        .text-container { 
            position: absolute; left: 40px; right: 58px; bottom: 88px; z-index: 40; 
            pointer-events: none; display: flex; flex-direction: column; justify-content: flex-end; 
            gap: 12px;
        }
        .etiqueta, .subtitle { font-family: 'Sora'; font-size: 20px; font-weight: 400; letter-spacing: -0.04em; line-height: 1; }
        .etiqueta { text-transform: uppercase; }
        .title { font-family: 'Sora'; font-size: 40px; font-weight: 300; line-height: 0.95; white-space: pre-line; letter-spacing: -0.05em; }
        .bold-part { font-weight: 800 !important; }

        /* --- SIDEBAR DERECHA --- */
        .sidebar-right { padding: 24px 8px; max-height: 0; opacity: 0; transition: var(--transition-smooth); overflow-y: auto; scrollbar-width: none; visibility: hidden; }
        .sidebar-right.active { max-height: 88vh; opacity: 1; visibility: visible; }
        
        .sidebar-right-title { font-family: 'Inter'; font-size: 16px; font-weight: 700; color: var(--text-main); padding: 10px 8px; border-bottom: 2px solid var(--accent-tips); margin-bottom: 15px; display: flex; align-items: center; gap: 8px; }
        .info-card { background: #FFFFFF; border: 1px solid var(--input-border); border-radius: 10px; padding: 14px; font-family: 'Inter'; font-size: 14px; line-height: 1.4; margin-bottom: 10px; color: var(--text-main); }
        .info-card h4 { font-size: 11px; color: var(--accent-primary); text-transform: uppercase; margin-bottom: 6px; border-bottom: 1px solid #eee; padding-bottom: 2px; }
        .narrative-badge { background: #fff9e6; color: #b08700; padding: 2px 6px; border-radius: 4px; font-weight: 700; font-size: 11px; display: inline-block; margin-bottom: 5px; }
        
        .tip-table { width: 100%; border-collapse: collapse; font-size: 12px; margin-top: 5px; }
        .tip-table th { text-align: left; color: var(--text-mute); padding: 4px; font-weight: 700; }
        .tip-table td { padding: 8px 4px; border-top: 1px solid #eee; }

        .checklist-box { display: flex; flex-direction: column; gap: 6px; margin-top: 10px; margin-bottom: 16px; padding: 0 8px; }
        .check-btn { display: flex; align-items: center; gap: 10px; padding: 12px; background: #fff; border: 1px solid var(--input-border); border-radius: 10px; cursor: pointer; transition: 0.2s; }
        .check-btn:hover { transform: translateX(5px); background: #fdfdfd; }
        .check-btn.checked { background: #E8F5E9; border-color: var(--accent-success); }
        .dot { width: 16px; height: 16px; border: 2px solid #ddd; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 10px; color: white; }
        .checked .dot { background: var(--accent-success); border-color: var(--accent-success); }
        .checked .dot::after { content: 'âœ“'; }
        .check-btn span { font-size: 14px; font-weight: 500; color: var(--text-main); }

        /* --- NAVBAR ESTILO FIGMA --- */
        .bottom-nav-container {
            position: fixed; bottom: 24px; left: 50%; transform: translateX(-50%);
            background: var(--card-bg); padding: 4px; border-radius: 16px;
            border: 1px solid var(--input-border); display: flex; align-items: center; z-index: 100;
            box-shadow: 0 8px 32px rgba(0,0,0,0.08);
        }
        
        .nav-group { display: flex; align-items: center; gap: 4px; position: relative; }
        
        .nav-item { 
            padding: 8px 16px; font-size: 13px; font-weight: 600; color: var(--text-mute); 
            cursor: pointer; position: relative; z-index: 2; transition: var(--transition-smooth); 
            border-radius: 12px;
        }
        .nav-item.active { color: #fff; }
        
        .nav-slider { 
            position: absolute; height: 100%; top: 0; left: 0; 
            background: var(--accent-primary); border-radius: 12px; 
            z-index: 1; transition: var(--transition-smooth); pointer-events: none; 
        }

        .nav-divider {
            width: 1px; height: 24px; background: var(--input-border); margin: 0 8px;
        }

        .nav-toggle-btn {
            padding: 8px 16px; font-size: 13px; font-weight: 600; color: var(--text-main);
            cursor: pointer; border-radius: 8px; transition: 0.2s;
            display: flex; align-items: center; gap: 8px;
        }
        .nav-toggle-btn:hover { background: rgba(0,0,0,0.04); }
        .nav-toggle-btn.on { background: #E8E8E8; color: var(--accent-primary); }
        .nav-toggle-btn.tips-on { background: #FFF4E5; color: var(--accent-tips); }
    </style>
</head>
<body>

    <div class="side-column">
        <div class="sidebar-base sidebar-left">
            <header><img src="https://i.imgur.com/FakCT9f.png" class="brand-logo"></header>
            
            <div class="label-style">Programa MEC</div>
            <select id="programSelector" class="ui-select" onchange="updateProgram(this.value)">
                <option value="General">General</option>
                <option value="Cultura CientÃ­fica">Cultura CientÃ­fica</option>
                <option value="PAS">PAS</option>
                <option value="PNEC">PNEC</option>
                <option value="Cecap">Cecap</option>
            </select>
            
            <div class="label-style">Imagen de Fondo</div>
            <label for="bgInput" class="ui-card file-label"><span>+</span> Cargar foto</label>
            <input type="file" id="bgInput" accept="image/*" style="display: none;">
            <input type="range" id="scaleInput" class="scale-slider" min="1" max="3" step="0.01" value="1">
            
            <div class="label-style">Textos</div>
            <input type="text" id="etiquetaIn" class="ui-card" value="La educaciÃ³n va a estar [buena]">
            <input type="text" id="titleIn" class="ui-card" value="DirecciÃ³n Nacional de [EducaciÃ³n]">
            <input type="text" id="subtitleIn" class="ui-card" value="EducaciÃ³n de [oportunidades]">
            
            <div class="label-style">Color</div>
            <div class="color-card">
                <div class="color-row">
                    <div class="color-dot" style="background: #E8E0FF;" data-color="#E8E0FF" data-border="#7B61FF"></div>
                    <div class="color-dot" style="background: #FFD0EF;" data-color="#FFD0EF" data-border="#FF61C6"></div>
                    <div class="color-dot" style="background: #D1FFC0;" data-color="#D1FFC0" data-border="#4CAF50"></div>
                    <div class="color-dot" style="background: #D2FFE8;" data-color="#D2FFE8" data-border="#00BFA5"></div>
                    <div class="color-dot" style="background: #DDFF9D;" data-color="#DDFF9D" data-border="#9E9D24"></div>
                    <div class="color-dot" style="background: #C0FFCA;" data-color="#C0FFCA" data-border="#2E7D32"></div>
                </div>
            </div>
            
            <button id="mainDownloadBtn" class="download-btn" onclick="downloadPoster()">Descargar Afiche</button>
        </div>
    </div>

    <div class="canvas-container">
        <div class="poster" id="posterArea">
            <div id="bgWrapper"><img id="bgPreview" src=""></div>
            <div id="logoContainer">
                <svg class="logo" viewBox="0 0 88 81" id="logoSvg">
                    <path d="M81.0034 17.2512V8H53.2558H44.0312V17.2512V26.5488V35.7907V45.0884V54.3396H53.2558H81.0034V45.0884H53.2558V35.7907H81.0034V26.5488H53.2558V17.2512H81.0034Z" fill="currentColor"/>
                    <path d="M20.9248 8C13.2393 8 7 14.248 7 21.9651C7 29.6822 13.23 35.9302 20.9248 35.9302C28.6196 35.9302 34.8497 29.6822 34.8497 21.9651C34.8497 14.248 28.6196 8 20.9248 8ZM20.9248 26.6325C18.3568 26.6325 16.2709 24.5406 16.2709 21.9651C16.2709 19.3896 18.3568 17.2977 20.9248 17.2977C23.4929 17.2977 25.5788 19.3896 25.5788 21.9651C25.5788 24.5406 23.4929 26.6325 20.9248 26.6325Z" fill="currentColor"/>
                    <path d="M34.8497 45.0977H7V54.4046H34.8497V45.0977Z" fill="currentColor"/>
                    <path d="M80.9907 63.6934H7V73.0003H80.9907V63.6934Z" fill="currentColor"/>
                </svg>
            </div>
            <div class="text-container" id="textContainer">
                <div class="etiqueta" id="etiquetaShow"></div>
                <div class="title" id="titleShow"></div>
                <div class="subtitle" id="subtitleShow"></div>
            </div>
        </div>
    </div>

    <nav class="bottom-nav-container">
        <div class="nav-group">
            <div id="navSlider" class="nav-slider"></div>
            <div class="nav-item active" onclick="switchTab(this)">Redes Sociales</div>
            <div class="nav-item" onclick="switchTab(this)">Certificados</div>
            <div class="nav-item" onclick="switchTab(this)">Invitaciones</div>
        </div>
        
        <div class="nav-divider"></div>
        
        <div class="nav-group">
            <div class="nav-toggle-btn" id="ejeToggle" onclick="toggleSidebar('left')">
                Eje del mes
            </div>
            <div class="nav-toggle-btn" id="tipsToggle" onclick="toggleSidebar('right')">
                ðŸ’¡ Tips de ComunicaciÃ³n
            </div>
        </div>
    </nav>

    <div class="side-column">
        <div class="sidebar-base sidebar-right" id="rightSidebar">
            <h3 class="sidebar-right-title">AcompaÃ±amiento PedagÃ³gico</h3>
            <div style="padding: 0 8px;">
                <div class="info-card">
                    <h4>Nuestra Estrategia</h4>
                    <p>Estar donde las cosas suceden. Priorizamos la <strong>pedagogÃ­a de la cercanÃ­a</strong>.</p>
                </div>
                <div class="info-card">
                    <h4>Narrativa de Cambio</h4>
                    <span class="narrative-badge">Prioridad 2026</span>
                    <p>Sostenemos trayectorias para que nadie transite su aprendizaje en soledad.</p>
                </div>
            </div>
            <div class="checklist-box">
                <div class="check-btn gamify" onclick="toggleCheck(this)"><div class="dot"></div><span>Â¿InteracciÃ³n humana?</span></div>
                <div class="check-btn gamify" onclick="toggleCheck(this)"><div class="dot"></div><span>Â¿Tono de comunidad?</span></div>
            </div>
        </div>

        <div class="sidebar-base sidebar-right" id="tipsSidebar" style="position: absolute;">
            <h3 class="sidebar-right-title">ðŸ“¢ Estrategia Visual</h3>
            <div style="padding: 0 8px;">
                <div class="info-card">
                    <h4>La TrÃ­ada Institucional</h4>
                    <p><strong>Â¿QuÃ© quiero?</strong> Definir una sola acciÃ³n.</p>
                    <p><strong>Â¿A quiÃ©n hablo?</strong> Ajustar tono segÃºn pÃºblico.</p>
                </div>
                
                <div class="info-card">
                    <h4>JerarquÃ­a Visual</h4>
                    <table class="tip-table">
                        <tr><th>El Gancho</th><td>TÃ­tulo impactante.</td></tr>
                        <tr><th>El Cuerpo</th><td>QuÃ©, CuÃ¡ndo, DÃ³nde.</td></tr>
                        <tr><th>El Cierre</th><td>CTA claro (InscrÃ­bete).</td></tr>
                    </table>
                </div>

                <div class="info-card" style="border-left: 4px solid #e74c3c;">
                    <h4>Regla de Oro: 20%</h4>
                    <p>Menos es mÃ¡s. El flyer es para llamar la atenciÃ³n, no para ordenanzas.</p>
                </div>
            </div>
            <div class="checklist-box">
                <div class="check-btn tips-check" onclick="toggleCheck(this)"><div class="dot"></div><span>Â¿TÃ­tulo llamativo?</span></div>
                <div class="check-btn tips-check" onclick="toggleCheck(this)"><div class="dot"></div><span>Â¿Llamado a la acciÃ³n?</span></div>
            </div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script>
        const inputs = { etiqueta: document.getElementById('etiquetaIn'), title: document.getElementById('titleIn'), subtitle: document.getElementById('subtitleIn') };
        const logoSvg = document.getElementById('logoSvg'), textContainer = document.getElementById('textContainer'), scaleInput = document.getElementById('scaleInput');
        const mainBtn = document.getElementById('mainDownloadBtn');
        
        const rightSidebar = document.getElementById('rightSidebar');
        const tipsSidebar = document.getElementById('tipsSidebar');
        const ejeToggle = document.getElementById('ejeToggle');
        const tipsToggle = document.getElementById('tipsToggle');

        function toggleSidebar(type) {
            if (type === 'left') {
                tipsSidebar.classList.remove('active');
                tipsToggle.classList.remove('tips-on');
                rightSidebar.classList.toggle('active');
                ejeToggle.classList.toggle('on');
            } else {
                rightSidebar.classList.remove('active');
                ejeToggle.classList.remove('on');
                tipsSidebar.classList.toggle('active');
                tipsToggle.classList.toggle('tips-on');
            }
        }

        function switchTab(element) {
            document.querySelectorAll('.nav-item').forEach(item => item.classList.remove('active'));
            element.classList.add('active');
            moveSlider(element);
        }

        function moveSlider(element) {
            const slider = document.getElementById('navSlider');
            slider.style.width = element.offsetWidth + "px";
            slider.style.left = element.offsetLeft + "px";
        }

        function toggleCheck(btn) { btn.classList.toggle('checked'); checkGamification(); }
        
        function checkGamification() {
            const gamifyChecks = document.querySelectorAll('.check-btn.gamify.checked').length;
            const tipsChecks = document.querySelectorAll('.check-btn.tips-check.checked').length;
            
            if(gamifyChecks >= 2 && tipsChecks >= 1) {
                mainBtn.classList.add('ready');
                mainBtn.innerHTML = "Â¡Todo listo! Descargar";
            } else {
                mainBtn.classList.remove('ready');
                mainBtn.innerHTML = "Descargar Afiche";
            }
        }

        function applyTTTColor(dot) {
            const mainColor = dot.dataset.color;
            const borderColor = dot.dataset.border;
            textContainer.style.color = mainColor;
            logoSvg.style.color = mainColor;
            dot.style.color = borderColor; 
        }

        function syncText() {
            const process = (t) => t.replace(/\[(.*?)\]/g, '<span class="bold-part">$1</span>');
            document.getElementById('etiquetaShow').innerHTML = process(inputs.etiqueta.value);
            document.getElementById('titleShow').innerHTML = process(inputs.title.value);
            document.getElementById('subtitleShow').innerHTML = process(inputs.subtitle.value);
        }

        document.querySelectorAll('.color-dot').forEach(dot => {
            dot.onclick = () => {
                document.querySelector('.color-dot.active')?.classList.remove('active');
                dot.classList.add('active');
                applyTTTColor(dot);
            }
        });

        const bgInput = document.getElementById('bgInput'), bgPreview = document.getElementById('bgPreview'), bgWrapper = document.getElementById('bgWrapper');
        let posX = 0, posY = 0, isDragging = false, startX, startY, currentScale = 1;
        
        bgInput.onchange = (e) => {
            const reader = new FileReader();
            reader.onload = (ev) => { bgPreview.src = ev.target.result; bgPreview.style.display = "block"; };
            reader.readAsDataURL(e.target.files[0]);
        };

        scaleInput.oninput = (e) => { currentScale = e.target.value; updateTransform(); };
        function updateTransform() { bgPreview.style.transform = `translate(${posX}px, ${posY}px) scale(${currentScale})`; }
        
        bgWrapper.onmousedown = (e) => { if(!bgPreview.src) return; isDragging = true; startX = e.clientX - posX; startY = e.clientY - posY; e.preventDefault(); };
        window.onmousemove = (e) => { if (isDragging) { posX = e.clientX - startX; posY = e.clientY - startY; updateTransform(); } };
        window.onmouseup = () => isDragging = false;

        async function downloadPoster() {
            const canvas = await html2canvas(document.getElementById('posterArea'), { scale: 3, useCORS: true });
            const link = document.createElement('a'); link.download = 'afiche-mec.png'; link.href = canvas.toDataURL(); link.click();
        }

        window.onload = () => {
            const firstDot = document.querySelector('.color-dot');
            if(firstDot) { firstDot.classList.add('active'); applyTTTColor(firstDot); }
            moveSlider(document.querySelector('.nav-item.active'));
            syncText();
        };

        Object.values(inputs).forEach(i => i.oninput = syncText);
    </script>
</body>
</html>
